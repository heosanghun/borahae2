# 개발 계획서: 연예인/아이돌 착장 → 유사 옷 검색 기능

**대상:** Lookbook 코너 (연예인 룩 + 유사 검색) — *배치 결정: [연예인룩_배치_결정.md](연예인룩_배치_결정.md)*  
**참고 서비스:** [케핏 kpop.fit](https://kpop.fit/) (아이돌 착장, 바로 따라잡자)  
**작성일:** 2026-02-19

---

## 1. 목표 및 배경

### 1.1 목표
- **보라해 스타일링 → Try-on** 단계에서, **연예인/아이돌 착장 사진**을 올리면  
  AI가 착장을 분해하고 **유사한 옷을 찾을 수 있는 검색 키워드**를 제공하며,  
  **네이버 쇼핑·무신사·쿠팡** 등으로 바로 검색할 수 있는 링크를 제공한다.

### 1.2 참고: kpop.fit 분석
| 항목 | 내용 |
|------|------|
| **서비스명** | 케핏 \| 아이돌 착장, 바로 따라잡자 |
| **핵심 기능** | OUTFIT FINDER (BETA): 무대/직캠/공항룩 캡처 업로드 → AI가 상의·하의·신발·가방·액세서리를 '비슷하게 입기 쉬운' 유사템 검색어로 정리 |
| **처리 방식** | 브랜드는 단정하지 않고, **형태/소재/디테일 중심** 키워드만 추출 |
| **검색 연결** | 유사템 키워드로 네이버쇼핑/무신사/쿠팡/Amazon에서 바로 검색 |
| **개인정보** | 이미지는 저장하지 않음, 결과(텍스트)만 저장 |

→ 위 플로우를 **보라해 Try-on 단계 안에** 통합하여, “연예인 옷 넣으면 유사 옷 검색” 경로를 제공한다.

---

## 2. 기능 요구사항

### 2.1 사용자 시나리오
1. 사용자가 **보라해 스타일링 시작** → Step 1~5 진행 후 **Step 6 (Virtual Try-On)** 진입.
2. Step 6에서 **「연예인 착장으로 유사 옷 찾기」** 블록을 이용해 **착장 사진 1장** 업로드.
3. AI가 착장을 **상의·하의·신발·가방·액세서리** 등으로 구분하고, 각 항목별 **검색용 키워드(한국어)** 를 출력.
4. 사용자는 **카테고리별 키워드**와 **「네이버 쇼핑 검색」「무신사 검색」「쿠팡 검색」** 버튼을 통해 외부 쇼핑 검색으로 이동.

### 2.2 비기능 요구사항
- **이미지 보관:** 업로드 이미지는 서버에 저장하지 않음(필요 시 클라이언트/메모리에서만 처리). 결과(텍스트 키워드)만 화면에 표시.
- **응답 시간:** AI 분석 결과는 10~30초 이내 목표.
- **반응형:** 기존 스타일링 모달과 동일한 반응형·다크모드 대응.

---

## 3. 개발 단계 계획

### Phase 1: 기획·설계 정리 (완료)
- [x] kpop.fit 서비스 분석
- [x] 보라해 Try-on(Step 6) 구조 파악
- [x] 개발 계획서 작성 (본 문서)

### Phase 2: UI 설계 및 진입점
| 단계 | 작업 내용 | 산출물 |
|------|-----------|--------|
| 2.1 | Step 6 상단에 **「연예인 착장 → 유사 옷 검색」** 블록 추가 (탭 또는 접이식 섹션) | HTML 구조 |
| 2.2 | 착장 이미지 **드래그 앤 드롭 / 파일 선택** 영역 UI | 업로드 영역 |
| 2.3 | 로딩 중 스피너 + “착장을 분석하고 있어요” 문구 | 로딩 UI |
| 2.4 | 결과 영역: 카테고리별 키워드(상의/하의/신발/가방/액세서리) + 검색 버튼 3종 | 결과 UI |
| 2.5 | 개인정보 안내 문구: “이미지는 저장하지 않아요. 결과(검색어)만 표시돼요.” | 문구·툴팁 |

### Phase 3: AI 분석 API 연동
| 단계 | 작업 내용 | 산출물 |
|------|-----------|--------|
| 3.1 | **Gemini Vision**(또는 기존 이미지 분석 API) 호출: 업로드 이미지 1장 입력 | API 설계 |
| 3.2 | 프롬프트 설계: “이 옷차림을 상의/하의/신발/가방/액세서리로 나누고, 각각 **비슷한 옷을 찾을 수 있는 검색 키워드**(한국어, 형태·소재·디테일 중심, 브랜드 X)” | 프롬프트 문서 |
| 3.3 | 응답을 **JSON 또는 구조화 텍스트**로 요청 (파싱 용이) | 응답 스키마 |
| 3.4 | 클라이언트에서 응답 파싱 → 카테고리별 키워드 추출 | main.js 로직 |

### Phase 4: 검색 링크 생성 및 노출
| 단계 | 작업 내용 | 산출물 |
|------|-----------|--------|
| 4.1 | **네이버 쇼핑** 검색 URL 생성: `https://search.shopping.naver.com/search/all?query={인코딩된 키워드}` | URL 규격 |
| 4.2 | **무신사** 검색 URL: `https://www.musinsa.com/search/musinsa/integration?q={인코딩된 키워드}` | URL 규격 |
| 4.3 | **쿠팡** 검색 URL: `https://www.coupang.com/np/search?q={인코딩된 키워드}` (또는 정책 확인 후 적용) | URL 규격 |
| 4.4 | 카테고리별로 “전체 키워드” 또는 “대표 키워드 1개”로 검색 링크 생성, 버튼 클릭 시 새 탭 오픈 | main.js + HTML |

### Phase 5: 연동 및 예외 처리
| 단계 | 작업 내용 | 산출물 |
|------|-----------|--------|
| 5.1 | 기존 **스타일링 모달 Step 6**과 스크롤·레이아웃 충돌 없이 블록 삽입 | CSS 조정 |
| 5.2 | API 실패 시: “다시 시도” 버튼 + 짧은 안내 메시지 | 에러 UI |
| 5.3 | 이미지 크기 제한 (예: 5MB), 형식 제한 (jpg, png, webp) | 유효성 검사 |
| 5.4 | i18n: 한국어/영어 문구 추가 (연예인 착장, 유사 옷 검색, 버튼 라벨) | i18n.js |

### Phase 6: 테스트 및 문서화
| 단계 | 작업 내용 | 산출물 |
|------|-----------|--------|
| 6.1 | 로컬에서 Step 6 진입 → 착장 업로드 → 키워드·검색 링크 동작 확인 | 테스트 체크리스트 |
| 6.2 | README 또는 docs에 “연예인 착장 유사 옷 검색” 사용 방법 1~2문단 추가 | 문서 |

---

## 4. 기술 스택 (기존 활용)

| 구분 | 기술 |
|------|------|
| 프론트 | HTML5, CSS3, Vanilla JS (기존 index.html, main.js, style.css) |
| AI 분석 | Google Gemini (Vision) — 기존 채팅·스타일링과 동일한 API 키·프록시 활용 |
| 배포 | Cloudflare Pages (빌드·배포 흐름 변경 없음) |

---

## 5. UI 배치 (안)

- **Step 6 (Virtual Try-On)** 레이아웃:
  - **상단:** “연예인/아이돌 착장으로 유사 옷 찾기” 섹션 (업로드 → 분석 → 결과)
  - **기존:** 카테고리 탭(상의/하의/원피스/아우터/패션) + 갤러리 + “내 의류 업로드” + Try-On 결과 영역

→ 두 기능을 **같은 Step 안에서** 위(착장 검색) / 아래(기존 Try-on) 로 구분하여 스크롤로 모두 이용 가능하게 한다.

---

## 6. 일정(가이드)

| Phase | 예상 기간 |
|-------|-----------|
| Phase 2 (UI) | 1~2일 |
| Phase 3 (AI 연동) | 1~2일 |
| Phase 4 (검색 링크) | 0.5일 |
| Phase 5 (연동·예외) | 0.5~1일 |
| Phase 6 (테스트·문서) | 0.5일 |

**총 예상:** 약 4~6일 (1인 기준).

---

## 7. 완료 조건

- [ ] Step 6에서 연예인/아이돌 착장 사진 1장 업로드 가능
- [ ] AI 분석 결과로 카테고리별 유사 옷 검색 키워드가 표시됨
- [ ] 네이버 쇼핑·무신사·쿠팡(또는 2개 이상) 검색 버튼 클릭 시 해당 키워드로 검색 페이지 오픈
- [ ] “이미지는 저장하지 않음” 안내 노출
- [ ] 기존 Try-on(갤러리·내 의류 업로드·Try-On 생성) 동작 유지

이 계획서를 바탕으로 Phase 2부터 순차 구현하면 된다.
